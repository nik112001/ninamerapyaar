<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ninaâ€™s Cozy Valentine ğŸ’–</title>

<style>
  body {
    margin: 0;
    font-family: "Comic Sans MS", Arial, sans-serif;
    background: linear-gradient(135deg, #ffe4ec, #fff1d6);
    overflow: hidden;
    text-align: center;
    color: #ff5c8a;
  }

  h1 {
    margin-top: 20px;
    font-size: 2.4rem;
  }

  #instructions {
    font-size: 1.2rem;
    margin-bottom: 8px;
  }

  #counter {
    font-size: 1.3rem;
    margin-bottom: 12px;
  }

  #musicBtn {
    background: #ffb3c6;
    color: #7a003c;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;
    margin-bottom: 15px;
  }

  .item {
    position: absolute;
    font-size: 2.6rem;
    cursor: pointer;
    animation: floatUp linear infinite;
    opacity: 0.9;
  }

  .yjhd {
    color: #9caf88; /* sage green */
    font-weight: bold;
  }

  @keyframes floatUp {
    from { transform: translateY(110vh); }
    to { transform: translateY(-10vh); }
  }

  #proposal {
    display: none;
    margin-top: 70px;
  }

  button.choice {
    font-size: 1.4rem;
    padding: 14px 28px;
    border: none;
    border-radius: 30px;
    background: #ff5c8a;
    color: white;
    cursor: pointer;
    margin: 15px;
    transition: transform 0.2s;
  }

  button.choice:hover {
    transform: scale(1.08);
  }

  #love {
    font-size: 2rem;
    margin-top: 20px;
    display: none;
  }

  /* Big 3333 for final animation */
  #bigThree {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 6rem;
    color: gold;
    font-weight: bold;
    opacity: 0;
    transition: opacity 1.5s ease-in-out, transform 1.5s ease-in-out;
    z-index: 9999;
  }

  /* Rose animation */
  .rose {
    position: fixed;
    font-size: 2rem;
    color: #ff0000;
    opacity: 0.9;
    pointer-events: none;
    animation: floatRose linear forwards;
  }

  @keyframes floatRose {
    0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
  }
</style>
</head>

<body>

<h1>Collect Ninaâ€™s Favorites ğŸ’•</h1>
<div id="instructions">
  Click each cozy favorite 3 times â˜ï¸
</div>

<button id="musicBtn">ğŸµ Turn on cozy music</button>

<div id="counter">
  ğŸ¦· 0 | ğŸ¥‘ 0 | ğŸ“ 0 | â˜• 0 | YJHD 0
</div>

<div id="bigThree">3333</div>

<div id="proposal">
  <h1>Nina ğŸ’–</h1>
  <p>You found everythingâ€¦ just like you found my heart.</p>
  <h2>Will you be my Valentine?</h2>

  <button class="choice" id="yesBtn">YES ğŸ’•</button>
  <button class="choice" id="noBtn">No</button>

  <div id="love">ğŸ’– happiest yes ever ğŸ’–</div>
</div>

<audio id="bgMusic" loop>
  <source src="cozy.mp3" type="audio/mpeg">
</audio>

<script>
  window.startMusic = startMusic;
  window.accept = accept;

  const music = document.getElementById("bgMusic");
  const counter = document.getElementById("counter");
  const proposal = document.getElementById("proposal");
  const love = document.getElementById("love");
  const bigThree = document.getElementById("bigThree");

  const collected = {
    tooth: 0,
    avo: 0,
    berry: 0,
    coffee: 0,
    yjhd: 0
  };

  function startMusic() {
    if (!music) return;
    music.volume = 0.4;
    music.play().catch(() => {});
    document.getElementById("musicBtn").style.display = "none";
  }

  function spawnItem(type, icon) {
    const el = document.createElement("div");
    el.textContent = icon;
    el.className = type === "yjhd" ? "item yjhd" : "item";
    el.style.left = Math.random() * 85 + "vw";
    el.style.animationDuration = (8 + Math.random() * 6) + "s";

    el.onclick = () => {
      if (type === "yjhd" && collected.yjhd < 3) {
        collected.yjhd++;
        el.remove();
      } else if (type !== "yjhd" && collected[type] < 3) {
        collected[type]++;
        el.remove();
      }
      updateCounter();
      checkWin();
    };

    document.body.appendChild(el);
    setTimeout(() => el.remove(), 15000);
  }

  function updateCounter() {
    counter.textContent =
      `ğŸ¦· ${collected.tooth} | ğŸ¥‘ ${collected.avo} | ğŸ“ ${collected.berry} | â˜• ${collected.coffee} | YJHD ${collected.yjhd}`;
  }

  function showBigThree() {
    bigThree.style.opacity = 1;
    bigThree.style.transform = "translate(-50%, -50%) scale(1.5)";
    setTimeout(() => {
      bigThree.style.opacity = 0;
      bigThree.style.transform = "translate(-50%, -50%) scale(3)";
    }, 1500);

    setTimeout(() => {
      proposal.style.display = "block";
    }, 2500);
  }

  function spawnRoses() {
    for (let i = 0; i < 50; i++) {
      const rose = document.createElement("div");
      rose.className = "rose";
      rose.textContent = "ğŸŒ¹";
      rose.style.left = Math.random() * window.innerWidth + "px";
      rose.style.fontSize = (16 + Math.random() * 24) + "px";
      rose.style.animationDuration = (4 + Math.random() * 4) + "s";
      document.body.appendChild(rose);
      setTimeout(() => rose.remove(), 8000);
    }
  }

  function checkWin() {
    const allCollected = Object.values(collected).every(v => v === 3);
    if (allCollected) {
      document.querySelectorAll(".item").forEach(i => i.remove());
      showBigThree();
    }
  }

  function accept() {
    spawnRoses();
    love.style.display = "block";
  }

  // Event listeners
  document.getElementById("musicBtn").addEventListener("click", startMusic);
  document.getElementById("yesBtn").addEventListener("click", accept);

  // No button trick
  const noBtn = document.getElementById("noBtn");
  let stopMoving = false;

  noBtn.addEventListener("mousemove", (e) => {
    if (stopMoving) return;
    const rect = noBtn.getBoundingClientRect();
    const distanceX = e.clientX - (rect.left + rect.width/2);
    const distanceY = e.clientY - (rect.top + rect.height/2);
    const distance = Math.sqrt(distanceX*distanceX + distanceY*distanceY);
    if (distance < 80) {
      const newX = Math.random() * (window.innerWidth - rect.width);
      const newY = Math.random() * (window.innerHeight - rect.height);
      noBtn.style.position = "absolute";
      noBtn.style.left = newX + "px";
      noBtn.style.top = newY + "px";
    }
  });

  setTimeout(() => { stopMoving = true; }, 5000);

  noBtn.addEventListener("click", () => {
    spawnRoses();
    alert("Sorry, you're stuck with me ğŸ’–");
  });

  // Spawn loop
  setInterval(() => {
    spawnItem("tooth", "ğŸ¦·");
    spawnItem("avo", "ğŸ¥‘");
    spawnItem("berry", "ğŸ“");
    spawnItem("coffee", "â˜•");
    if (collected.yjhd < 3) spawnItem("yjhd", "YJHD");
  }, 2000);

</script>
</body>
</html>
